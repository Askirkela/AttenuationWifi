var mousePos,mouseDownPos,mouseUpPos;canvas.addEventListener("mousemove",function(a){mousePos=getMousePos(canvas,a),currState()},!1),canvas.addEventListener("mousedown",function(a){mouseDownPos=getMousePos(canvas,a),currentTool!==tools[3]&&dispatch(a),currState()},!1),canvas.addEventListener("mouseup",function(a){currentTool===tools[3]&&(mouseUpPos=getMousePos(canvas,a),console.log("["+mouseDownPos.x+", "+mouseDownPos.y+"], ["+mouseUpPos.x+", "+mouseUpPos.y+"]"),placeWall(mouseDownPos.x,mouseDownPos.y,mouseUpPos.x,mouseUpPos.y))},!1),materials.forEach(function(a){var b=document.createElement("option"),c=document.createTextNode(a);b.append(c),select.append(b)}),drawBackCanvas();var legend=$("#legend")[0];for(e in materialsProperties){var div=$("<div />",{class:"col-md-2",style:"color:gold;font-weight:bold;background-color:"+materialsProperties[e].color,text:e});div.appendTo(legend)}$("#debug").toggle();